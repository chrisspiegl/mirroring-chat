(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chat"],{"1b33":function(e,t,s){},2919:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-container",{staticClass:"fill-height"},[s("div",{staticClass:"boxToFillHeight"},[s("div",e._b({staticClass:"chat-container"},"div",e.messages,!1),[s("vue-scroll",{ref:"vuescroll",attrs:{ops:e.vuescrollOps}},[s("v-card",{staticClass:"mb-2"},[s("v-card-title",{staticClass:"justify-center"},[e._v("You Reached the Top")]),s("v-card-subtitle",{staticClass:"text-center"},[e._v("Currently this is limited to the past 50 messages on load. "),s("br"),e._v(" This may change in the future, let us know if this is important to you.")])],1),e._l(e.messages,(function(t){return s("v-card",{key:t.timestamp,staticClass:"mb-2",class:t.provider+"-bg",attrs:{outlined:""}},[s("v-list-item",[s("v-list-item-avatar",{staticClass:"mr-2 my-0",attrs:{size:"30"}},[s("v-img",{attrs:{src:e.avatar(t)}})],1),s("v-list-item-content",[s("v-list-item-title",[s("v-icon",{attrs:{size:"1rem"}},[e._v("$"+e._s(t.provider))]),e._v("/"+e._s(t.displayName))],1)],1),s("v-list-item-action-text",[e._v(e._s(e._f("moment")(t.sentAt,"from",e.time)))])],1),s("v-card-text",[e._v(e._s(t.message))])],1)}))],2)],1),s("div",[s("v-system-bar",{attrs:{color:"transparent"}},[s("v-spacer"),e.lastUpdated?s("span",[e._v("Last chat message recieved "+e._s(e._f("moment")(e.lastUpdated,"from",e.time)))]):e._e()],1)],1)])])},i=[],r=s("2f62"),n=s("e1e5"),o={name:"Chat",components:{},computed:{...Object(r["b"])(["getProfile","isAuthenticated","isProfileLoaded"]),...Object(r["c"])({channelName:e=>e.user.profile.idUser,user:e=>e.user.profile,time:e=>e.time.now})},data(){return{newMessage:null,messages:[],lastUpdated:null,scrollBottom:!0,scrollBottomOnInit:!0,vuescrollOps:{scrollPanel:{initialScrollY:"100%",scrollingX:!1,scrollingY:!0,speed:300}}}},mounted(){this.$log.debug("Chat.vue mounted"),Object(n["a"])({url:"/v1/chat/messages/"+this.user.idUser,method:"GET"}).then(e=>{e.data.messages.forEach(e=>{this.messages.push(e)}),this.lastUpdated=new Date}).catch(e=>{this.$log.error("Error requesting chat messages: ",e)})},watch:{newMessage(e){this.$log.debug("Typing: ",e)},messages(e){this.$log.debug("Currently displaying "+e.length);const{scrollTop:t}=this.$refs.vuescroll.getPosition(),s=t+this.$refs.vuescroll.$el.scrollHeight,a=this.$refs.vuescroll.$children[0].$el.scrollHeight;this.scrollBottom=this.scrollBottomOnInit||s>a-200,this.scrollBottomOnInit=!1,this.$nextTick((function(){this.scrollBottom&&this.$refs.vuescroll.scrollTo({y:"100%"})}))}},methods:{avatar(e){let t=`https://api.adorable.io/avatars/285/${e.displayName}.png`;switch(e.provider){case"twitch":e.providerObject&&e.providerObject.userHelix&&(t=e.providerObject.userHelix.profile_image_url);break;case"youtube":t=e.providerObject.authorDetails.profileImageUrl;break;default:break}return t},chatTopReached(){this.$log.debug("top of chat reached, TODO: load previous messages")},send(){this.$log.debug("Message Typed and Hit Enter: ",this.newMessage)}},sockets:{connect(){this.$log.debug("chat socket connected")},hello(e){this.$log.debug("socket on *hello* with",e)},server(e){this.$log.debug("server: ",e)}},created(){this.sockets.subscribe("message-to-"+this.channelName,e=>{this.$log.debug("socket received message for "+this.channelName),e.data.messages.forEach(e=>{this.messages.push(e),this.lastUpdated=new Date})}),this.$socket.emit("hello","client says hey"),this.$socket.emit("chat-channel-connect",{channelName:this.channelName})},updated(){},destroyed(){this.$socket.emit("chat-channel-disconnect",{channelName:this.channelName})}},l=o,c=(s("d11a"),s("2877")),h=s("6544"),d=s.n(h),u=(s("615b"),s("10d2")),m=s("2b0e"),g=(s("6ece"),s("0789")),p=s("a9ad"),v=s("fe6c"),b=s("a452"),f=s("7560"),_=s("80d2"),y=s("58df");const C=Object(y["a"])(p["a"],Object(v["b"])(["absolute","fixed","top","bottom"]),b["a"],f["a"]);var B=C.extend({name:"v-progress-linear",props:{active:{type:Boolean,default:!0},backgroundColor:{type:String,default:null},backgroundOpacity:{type:[Number,String],default:null},bufferValue:{type:[Number,String],default:100},color:{type:String,default:"primary"},height:{type:[Number,String],default:4},indeterminate:Boolean,query:Boolean,rounded:Boolean,stream:Boolean,striped:Boolean,value:{type:[Number,String],default:0}},data(){return{internalLazyValue:this.value||0}},computed:{__cachedBackground(){return this.$createElement("div",this.setBackgroundColor(this.backgroundColor||this.color,{staticClass:"v-progress-linear__background",style:this.backgroundStyle}))},__cachedBar(){return this.$createElement(this.computedTransition,[this.__cachedBarType])},__cachedBarType(){return this.indeterminate?this.__cachedIndeterminate:this.__cachedDeterminate},__cachedBuffer(){return this.$createElement("div",{staticClass:"v-progress-linear__buffer",style:this.styles})},__cachedDeterminate(){return this.$createElement("div",this.setBackgroundColor(this.color,{staticClass:"v-progress-linear__determinate",style:{width:Object(_["f"])(this.normalizedValue,"%")}}))},__cachedIndeterminate(){return this.$createElement("div",{staticClass:"v-progress-linear__indeterminate",class:{"v-progress-linear__indeterminate--active":this.active}},[this.genProgressBar("long"),this.genProgressBar("short")])},__cachedStream(){return this.stream?this.$createElement("div",this.setTextColor(this.color,{staticClass:"v-progress-linear__stream",style:{width:Object(_["f"])(100-this.normalizedBuffer,"%")}})):null},backgroundStyle(){const e=null==this.backgroundOpacity?this.backgroundColor?1:.3:parseFloat(this.backgroundOpacity);return{opacity:e,[this.$vuetify.rtl?"right":"left"]:Object(_["f"])(this.normalizedValue,"%"),width:Object(_["f"])(this.normalizedBuffer-this.normalizedValue,"%")}},classes(){return{"v-progress-linear--absolute":this.absolute,"v-progress-linear--fixed":this.fixed,"v-progress-linear--query":this.query,"v-progress-linear--reactive":this.reactive,"v-progress-linear--rounded":this.rounded,"v-progress-linear--striped":this.striped,...this.themeClasses}},computedTransition(){return this.indeterminate?g["b"]:g["c"]},normalizedBuffer(){return this.normalize(this.bufferValue)},normalizedValue(){return this.normalize(this.internalLazyValue)},reactive(){return Boolean(this.$listeners.change)},styles(){const e={};return this.active||(e.height=0),this.indeterminate||100===parseFloat(this.normalizedBuffer)||(e.width=Object(_["f"])(this.normalizedBuffer,"%")),e}},methods:{genContent(){const e=Object(_["j"])(this,"default",{value:this.internalLazyValue});return e?this.$createElement("div",{staticClass:"v-progress-linear__content"},e):null},genListeners(){const e=this.$listeners;return this.reactive&&(e.click=this.onClick),e},genProgressBar(e){return this.$createElement("div",this.setBackgroundColor(this.color,{staticClass:"v-progress-linear__indeterminate",class:{[e]:!0}}))},onClick(e){if(!this.reactive)return;const{width:t}=this.$el.getBoundingClientRect();this.internalValue=e.offsetX/t*100},normalize(e){return e<0?0:e>100?100:parseFloat(e)}},render(e){const t={staticClass:"v-progress-linear",attrs:{role:"progressbar","aria-valuemin":0,"aria-valuemax":this.normalizedBuffer,"aria-valuenow":this.indeterminate?void 0:this.normalizedValue},class:this.classes,style:{bottom:this.bottom?0:void 0,height:this.active?Object(_["f"])(this.height):0,top:this.top?0:void 0},on:this.genListeners()};return e("div",t,[this.__cachedStream,this.__cachedBackground,this.__cachedBuffer,this.__cachedBar,this.genContent()])}}),$=B,k=m["default"].extend().extend({name:"loadable",props:{loading:{type:[Boolean,String],default:!1},loaderHeight:{type:[Number,String],default:2}},methods:{genProgress(){return!1===this.loading?null:this.$slots.progress||this.$createElement($,{props:{absolute:!0,color:!0===this.loading||""===this.loading?this.color||"primary":this.loading,height:this.loaderHeight,indeterminate:!0}})}}}),O=s("1c87"),w=Object(y["a"])(k,O["a"],u["a"]).extend({name:"v-card",props:{flat:Boolean,hover:Boolean,img:String,link:Boolean,loaderHeight:{type:[Number,String],default:4},outlined:Boolean,raised:Boolean,shaped:Boolean},computed:{classes(){return{"v-card":!0,...O["a"].options.computed.classes.call(this),"v-card--flat":this.flat,"v-card--hover":this.hover,"v-card--link":this.isClickable,"v-card--loading":this.loading,"v-card--disabled":this.disabled,"v-card--outlined":this.outlined,"v-card--raised":this.raised,"v-card--shaped":this.shaped,...u["a"].options.computed.classes.call(this)}},styles(){const e={...u["a"].options.computed.styles.call(this)};return this.img&&(e.background=`url("${this.img}") center center / cover no-repeat`),e}},methods:{genProgress(){const e=k.options.methods.genProgress.call(this);return e?this.$createElement("div",{staticClass:"v-card__progress",key:"progress"},[e]):null}},render(e){const{tag:t,data:s}=this.generateRouteLink();return s.style=this.styles,this.isClickable&&(s.attrs=s.attrs||{},s.attrs.tabindex=0),e(t,this.setBackgroundColor(this.color,s),[this.genProgress(),this.$slots.default])}});Object(_["g"])("v-card__actions");const j=Object(_["g"])("v-card__subtitle"),V=Object(_["g"])("v-card__text"),x=Object(_["g"])("v-card__title");var T=s("a523"),z=s("132d"),S=s("adda"),N=s("da13"),E=s("5d23"),I=s("8270"),H=s("2fa4"),L=(s("8308"),s("3a66")),P=Object(y["a"])(Object(L["a"])("bar",["height","window"]),p["a"],f["a"]).extend({name:"v-system-bar",props:{height:[Number,String],lightsOut:Boolean,window:Boolean},computed:{classes(){return{"v-system-bar--lights-out":this.lightsOut,"v-system-bar--absolute":this.absolute,"v-system-bar--fixed":!this.absolute&&(this.app||this.fixed),"v-system-bar--window":this.window,...this.themeClasses}},computedHeight(){return this.height?isNaN(parseInt(this.height))?this.height:parseInt(this.height):this.window?32:24},styles(){return{height:Object(_["f"])(this.computedHeight)}}},methods:{updateApplication(){return this.$el?this.$el.clientHeight:this.computedHeight}},render(e){const t={staticClass:"v-system-bar",class:this.classes,style:this.styles,on:this.$listeners};return e("div",this.setBackgroundColor(this.color,t),Object(_["j"])(this))}}),A=Object(c["a"])(l,a,i,!1,null,"6146ee49",null);t["default"]=A.exports;d()(A,{VCard:w,VCardSubtitle:j,VCardText:V,VCardTitle:x,VContainer:T["a"],VIcon:z["a"],VImg:S["a"],VListItem:N["a"],VListItemActionText:E["a"],VListItemAvatar:I["a"],VListItemContent:E["b"],VListItemTitle:E["c"],VSpacer:H["a"],VSystemBar:P})},"615b":function(e,t,s){},"6ece":function(e,t,s){},8308:function(e,t,s){},c1e5:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-container",{staticClass:"admin"},[s("h1",[e._v("Admin")])])},i=[],r={name:"Admin",components:{},mounted(){this.$log.debug("Admin.vue mounted")}},n=r,o=s("2877"),l=s("6544"),c=s.n(l),h=s("a523"),d=Object(o["a"])(n,a,i,!1,null,null,null);t["default"]=d.exports;c()(d,{VContainer:h["a"]})},d11a:function(e,t,s){"use strict";var a=s("1b33"),i=s.n(a);i.a}}]);